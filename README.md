# Constructing future behaviour

<!-- TABLE OF CONTENTS -->
## Table of Contents

* [About the Project](#about-the-project)
* [Getting Started](#getting-started)
	* [Installation](#installation)
	* [Reproducing Figures](#reproducing-figures)
* [Contact](#contact)

<!-- ABOUT THE PROJECT -->
## About The Project

This provides all simulation and analysis code to produce the results of [Constructing future behaviour in the hippocampal formation through composition and replay](https://www.biorxiv.org/content/10.1101/2023.04.07.536053v2).
All theoretical results were obtained in Python. The analysis of empirical data was done in Matlab. The reanalysed dataset from the paper by [Duvelle et al.](https://doi.org/10.1016/j.cub.2021.01.005) is [openly available](https://doi.org/10.25493/7NJQ-ANH); the reanalysed data from the paper by [Pfeiffer and Foster](https://doi.org/10.1038/nature12112) was obtained by request from the authors.

<!-- GETTING STARTED -->
## Getting Started

You need to install [python >= 3.6.0](https://www.python.org/downloads/) and [pytorch >= 1.6.0](https://pytorch.org/).
All matlab analyses were run in Matlab 2021a. To replicate the empirical results, you will need to source data (see [above](#about-the-project)).

### Installation

Clone the repo

```sh
git clone https://github.com/jbakermans/state-space-composition.git
```

### Reproducing Figures

Each figure panel is generated by a simulation script that is executed by navigating to its directory, then running

```sh
python simX.py
```

for python (.py) scripts, or 

```sh
getFigs
```

in the matlab terminal for matlab (.m) scripts.

The simulation scripts correspond to the preprint figure panels as follows:

- Fig 1i,j: ContinuousPlanning/sim4.py
- Fig 1k: ContinuousPlanning/sim5.py
- Fig 2b: DiscretePlanning/sim1.py
- Fig 2c: ContinuousPlanning/sim1.py
- Fig 2f: DiscretePlanning/sim2.py
- Fig 2f inset: ContinuousPlanning/sim2.py
- Fig 3b: DiscretePlanning/sim2.py
- Fig 3e,f discrete: DiscreteHoming/sim1.py
- Fig 3e,f continuous: ContinuousPlanning/sim3.py
- Fig 4d,b,e, h-k: PfeifferFoster/getFigs.m
- Fig 4f,g: ContinuousPlanning/sim6.py
- Fig 5f-j: PfeifferFoster/getFigs.m
- Fig 5d,e: ContinuousPlanning/sim6.py
- Fig S1a,b: DiscretePlanning/sim3.py
- Fig S1c: DiscretePlanning/sim4.py
- Fig S2: HierarchicalPlanning/sim1.py
- Fig S7: PfeifferFoster/getFigs.m
- Fig S8: DuvelleSpiers/getFigs.m
- Fig S9: DuvelleSpiers/getFigs.m

<!-- CONTACT -->
## Contact

[Jacob Bakermans](http://users.ox.ac.uk/~phys1358/) - jacob.bakermans [at] gmail.com

Project Link: [https://github.com/jbakermans/state-space-composition](https://github.com/jbakermans/state-space-composition)